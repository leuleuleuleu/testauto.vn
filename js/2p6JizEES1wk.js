function onresizeFunc(e,r){r.css({"margin-top":0,top:e.offset().top,left:e.offset().left}),jQuery("#colors_ctrls").css({top:e.offset().top+e.height-50,left:e.offset().left})}function preload(e){if(void 0!==document.body)try{var r=document.createElement("div"),o=r.style;o.position="absolute",o.top=o.left=0,o.visibility="hidden",document.body.appendChild(r),r.innerHTML='<img class="preload_img" src="'+e+'" />'}catch(e){}}jQuery.fn.j360=function(e){return e=jQuery.extend({clicked:!1,currImg:1},e),this.each((function(){var r=jQuery(this),o={};r.css({"margin-left":"auto","margin-right":"auto","text-align":"center",overflow:"hidden"}),$overlay=r.clone(!0),$overlay.html('<img src="images/loader.gif" class="loader" style="margin-top:'+(r.height()/2-15)+'px" />'),$overlay.attr("id","view_overlay"),$overlay.css({position:"absolute","z-index":"5",top:r.offset().top,left:r.offset().left,background:"#fff"}),r.after($overlay),r.after('<div id="colors_ctrls"></div>'),jQuery("#colors_ctrls").css({width:r.width(),position:"absolute","z-index":"5",top:r.offset().top+r.height-50,left:r.offset().left});var t=0;jQuery("img",r).each((function(){o[++t]=jQuery(this).attr("src"),preload(jQuery(this).attr("src"))}));var i=0;if(jQuery(".preload_img").load((function(){++i==t&&($overlay.animate({filter:"alpha(Opacity=0)",opacity:0},500),r.html('<img src="'+o[1]+'" />'),$overlay.bind("mousedown touchstart",(function(r){return"touchstart"==r.type?e.currPos=window.event.touches[0].pageX:e.currPos=r.pageX,e.clicked=!0,!1})),jQuery(document).bind("mouseup touchend",(function(){e.clicked=!1})),jQuery(document).bind("mousemove touchmove",(function(i){var n;e.clicked&&(n="touchmove"==i.type?window.event.targetTouches[0].pageX:i.pageX,Math.abs(e.currPos-n)>=4&&(e.currPos-n>=4?(e.currImg++,e.currImg>t&&(e.currImg=1)):(e.currImg--,e.currImg<1&&(e.currImg=t)),e.currPos=n,r.html('<img src="'+o[e.currImg]+'" />')))})))})),jQuery.browser.msie||jQuery.browser.mozilla||jQuery.browser.opera||jQuery.browser.safari)jQuery(window).resize((function(){onresizeFunc(r,$overlay)}));else{var n="onorientationchange"in window?"orientationchange":"resize";window.addEventListener(n,(function(){onresizeFunc(r,$overlay)}),!1)}onresizeFunc(r,$overlay)}))};